<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JavaScript View Model Example</title>
</head>
<body>

<h1>JavaScript View Model Example</h1>

<div id="app">
    <div id="peopleList"></div>
    <button id="increaseAgesButton">Increase All Ages</button>
</div>

<script>
// Data Model Class
class Person {
    constructor(firstName, lastName, email, age) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.email = email;
        this.age = age;
    }

    // Computed property for full name
    get fullName() {
        return `${this.firstName} ${this.lastName}`;
    }
}

// Subclass: Student
class Student extends Person {
    constructor(firstName, lastName, email, age, grade) {
        super(firstName, lastName, email, age);
        this.grade = grade;
    }
}

// Subclass: Teacher
class Teacher extends Person {
    constructor(firstName, lastName, email, age, subject) {
        super(firstName, lastName, email, age);
        this.subject = subject;
    }
}

// Crowd Class
class Crowd {
    constructor() {
        this.people = [];
    }

    // Add person to the crowd
    addPerson(person) {
        this.people.push(person);
    }

    // Increase age of all people in the crowd
    increaseAges() {
        console.log("Original ages:");
        console.log(this.people.map(person => ({ fullName: person.fullName, age: person.age })));
        
        this.people.forEach(person => {
            person.age++;
        });

        console.log("Ages after increase:");
        console.log(this.people.map(person => ({ fullName: person.fullName, age: person.age })));
        
        this.render();
    }

    // Render people to the DOM
    render() {
        const peopleList = document.getElementById('peopleList');
        peopleList.innerHTML = ''; // Clear previous content

        this.people.forEach(person => {
            const personElement = document.createElement('div');
            personElement.textContent = `${person.fullName}, ${person.age}`;

            if (person instanceof Student) {
                personElement.textContent += `, Grade: ${person.grade}`;
            } else if (person instanceof Teacher) {
                personElement.textContent += `, Subject: ${person.subject}`;
            }

            peopleList.appendChild(personElement);
        });
    }
}

// Instantiate Crowd
const crowd = new Crowd();

// Instantiate People
const student1 = new Student('Alice', 'Smith', 'alice@example.com', 15, 9);
const teacher1 = new Teacher('Mr.', 'Johnson', 'mr.johnson@example.com', 35, 'Math');
const student2 = new Student('Bob', 'Jones', 'bob@example.com', 16, 10);

// Add people to the crowd
crowd.addPerson(student1);
crowd.addPerson(teacher1);
crowd.addPerson(student2);

// Render the crowd
crowd.render();

// Add event listener to the button
document.getElementById('increaseAgesButton').addEventListener('click', () => {
    crowd.increaseAges();
});
</script>

</body>
</html>
